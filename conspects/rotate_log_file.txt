Завдання: Налаштувати NGINX так, щоб щотижнево ротувати файл журналу за допомогою інструменту logrotate.

Суть завдання:

Поточний стан показує, що файл журналу NGINX ротується щодня.

Ми хочемо змінити цю настройку, щоб файл журналу ротувався щотижнево.

Шлях виконання:

Редагування файлу конфігурації logrotate для NGINX:

Відкрийте файл /etc/logrotate.d/nginx у вашому улюбленому текстовому редакторі (наприклад, nano, vim, gedit).

sudo nano /etc/logrotate.d/nginx
Зміна параметра частоти ротації:

Знайдіть або додайте рядок, що відповідає за ротацію файлів журналу. Змініть цей рядок з:


rotate 14
на:
weekly


Якщо рядок rotate не існує, просто додайте його.

--- ✄ -------------------------


Перевірка конфігурації logrotate:

Використовуйте команду logrotate для перевірки конфігурації без реального ротації:

sudo logrotate -d /etc/logrotate.d/nginx

Ви маєте побачити зміни у повідомленнях, які показують, що ротація тепер відбувається щотижнево.

--- ✄ -------------------------

Перевірка дії ротації:

Щоб перевірити, чи відбувається ротація відповідно до нової конфігурації, використовуйте команду:


sudo logrotate /etc/logrotate.d/nginx

Або дочекайтеся наступного тижня і перевірте, чи старі файли журналу були віджарені або перейменовані.

Тепер ваша система NGINX буде автоматично ротувати файли журналу щотижнево згідно нової конфігурації.




